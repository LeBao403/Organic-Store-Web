// X√ìA D·ªÆ LI·ªÜU C≈®
MATCH (n) DETACH DELETE n;

// ==========================
// ü•¶ DANH M·ª§C
// ==========================
CREATE
(:DanhMuc {MaDM: "DM01", TenDM: "Rau C·ªß T∆∞∆°i"}),
(:DanhMuc {MaDM: "DM02", TenDM: "Tr√°i C√¢y"}),
(:DanhMuc {MaDM: "DM03", TenDM: "Ng≈© C·ªëc H·ªØu C∆°"}),
(:DanhMuc {MaDM: "DM04", TenDM: "Gia V·ªã Thi√™n Nhi√™n"});

// ==========================
// ü•ï S·∫¢N PH·∫®M (m·ªói danh m·ª•c ~10 sp)
// ==========================
CREATE
// DM01 - Rau c·ªß
(:SanPham {MaSP:"SP001", TenSP:"C√† r·ªët ƒê√† L·∫°t", DonVi:"Kg", GiaBan:35000, MoTa:"T∆∞∆°i, kh√¥ng thu·ªëc tr·ª´ s√¢u", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP002", TenSP:"Khoai t√¢y v√†ng", DonVi:"Kg", GiaBan:40000, MoTa:"Khoai t√¢y s·∫°ch ƒê√† L·∫°t", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP003", TenSP:"C·∫£i b√≥ x√¥i", DonVi:"B√≥", GiaBan:45000, MoTa:"Rau xanh l√° t∆∞∆°i t·ªët", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/cai-be_epqmoy.png"}),
(:SanPham {MaSP:"SP004", TenSP:"X√† l√°ch Romaine", DonVi:"B√≥", GiaBan:38000, MoTa:"T∆∞∆°i gi√≤n, kh√¥ng ch·∫•t b·∫£o qu·∫£n", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP005", TenSP:"B√≠ ng√≤i xanh", DonVi:"Kg", GiaBan:48000, MoTa:"Gi√†u ch·∫•t x∆°", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP006", TenSP:"C√† chua bi", DonVi:"Kg", GiaBan:60000, MoTa:"T∆∞∆°i ngon, ƒë·ªè m·ªçng", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP007", TenSP:"Rau mu·ªëng h·ªØu c∆°", DonVi:"B√≥", GiaBan:25000, MoTa:"Tr·ªìng th·ªßy canh s·∫°ch", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP008", TenSP:"C·ªß d·ªÅn ƒë·ªè", DonVi:"Kg", GiaBan:52000, MoTa:"T·ªët cho tim m·∫°ch", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP009", TenSP:"S√∫p l∆° xanh", DonVi:"Kg", GiaBan:55000, MoTa:"Gi√†u vitamin C", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP010", TenSP:"H√†nh t√¢y v√†ng", DonVi:"Kg", GiaBan:30000, MoTa:"Th∆°m, √≠t cay", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),

// DM02 - Tr√°i c√¢y
(:SanPham {MaSP:"SP011", TenSP:"T√°o Fuji h·ªØu c∆°", DonVi:"Kg", GiaBan:120000, MoTa:"Gi√≤n ng·ªçt", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP012", TenSP:"Cam h·ªØu c∆°", DonVi:"Kg", GiaBan:85000, MoTa:"Cam s·∫°ch, nhi·ªÅu n∆∞·ªõc", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP013", TenSP:"Chu·ªëi cau", DonVi:"N·∫£i", GiaBan:40000, MoTa:"Ng·ªçt t·ª± nhi√™n", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP014", TenSP:"L√™ H√†n Qu·ªëc", DonVi:"Kg", GiaBan:95000, MoTa:"To, gi√≤n, ng·ªçt m√°t", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP015", TenSP:"B∆∞·ªüi da xanh", DonVi:"Tr√°i", GiaBan:110000, MoTa:"Th∆°m ngon", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP016", TenSP:"D∆∞a l∆∞·ªõi", DonVi:"Tr√°i", GiaBan:80000, MoTa:"Th∆°m ng·ªçt", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP017", TenSP:"D√¢u t√¢y ƒê√† L·∫°t", DonVi:"H·ªôp", GiaBan:150000, MoTa:"T∆∞∆°i, ng·ªçt nh·∫π", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP018", TenSP:"Nho t√≠m kh√¥ng h·∫°t", DonVi:"Kg", GiaBan:130000, MoTa:"Nh·∫≠p kh·∫©u √öc", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP019", TenSP:"Thanh long ru·ªôt ƒë·ªè", DonVi:"Kg", GiaBan:55000, MoTa:"Vi·ªát Nam, ng·ªçt m√°t", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),
(:SanPham {MaSP:"SP020", TenSP:"Xo√†i c√°t H√≤a L·ªôc", DonVi:"Kg", GiaBan:90000, MoTa:"Th∆°m, d·∫ªo", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807550/tao_jcnqpe.jpg"}),

// DM03 - Ng≈© c·ªëc
(:SanPham {MaSP:"SP021", TenSP:"G·∫°o l·ª©t ƒë·ªè", DonVi:"Kg", GiaBan:55000, MoTa:"T·ªët cho s·ª©c kh·ªèe", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP022", TenSP:"Y·∫øn m·∫°ch c√°n m·ªèng", DonVi:"G√≥i", GiaBan:70000, MoTa:"Ng≈© c·ªëc ƒÉn s√°ng h·ªØu c∆°", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP023", TenSP:"ƒê·∫≠u n√†nh v√†ng", DonVi:"Kg", GiaBan:60000, MoTa:"Kh√¥ng bi·∫øn ƒë·ªïi gen", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP024", TenSP:"ƒê·∫≠u xanh s·∫°ch", DonVi:"Kg", GiaBan:50000, MoTa:"Gi√†u protein", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP025", TenSP:"H·∫°t chia Peru", DonVi:"G√≥i", GiaBan:120000, MoTa:"Gi√†u omega-3", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP026", TenSP:"Y·∫øn m·∫°ch nguy√™n h·∫°t", DonVi:"G√≥i", GiaBan:80000, MoTa:"B·ªØa s√°ng dinh d∆∞·ª°ng", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP027", TenSP:"G·∫°o ƒëen h·ªØu c∆°", DonVi:"Kg", GiaBan:75000, MoTa:"Gi√†u s·∫Øt v√† k·∫Ωm", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP028", TenSP:"Ng√¥ h·∫°t kh√¥", DonVi:"Kg", GiaBan:40000, MoTa:"S·∫•y t·ª± nhi√™n", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP029", TenSP:"ƒê·∫≠u ph·ªông h·ªØu c∆°", DonVi:"Kg", GiaBan:65000, MoTa:"Kh√¥ng mu·ªëi, nguy√™n h·∫°t", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP030", TenSP:"Y·∫øn m·∫°ch ƒÉn li·ªÅn", DonVi:"G√≥i", GiaBan:70000, MoTa:"Ti·ªán l·ª£i", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),

// DM04 - Gia v·ªã
(:SanPham {MaSP:"SP031", TenSP:"Mu·ªëi h·ªìng Himalaya", DonVi:"H≈©", GiaBan:70000, MoTa:"Tinh khi·∫øt", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP032", TenSP:"Ti√™u ƒëen Ph√∫ Qu·ªëc", DonVi:"H≈©", GiaBan:60000, MoTa:"Cay th∆°m", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP033", TenSP:"M·∫≠t ong hoa c√† ph√™", DonVi:"Chai", GiaBan:120000, MoTa:"Ng·ªçt t·ª± nhi√™n", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP034", TenSP:"ƒê∆∞·ªùng th·ªët n·ªët", DonVi:"Kg", GiaBan:90000, MoTa:"Kh√¥ng t·∫©y tr·∫Øng", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP035", TenSP:"N∆∞·ªõc t∆∞∆°ng h·ªØu c∆°", DonVi:"Chai", GiaBan:80000, MoTa:"L√™n men t·ª± nhi√™n", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP036", TenSP:"D·∫ßu m√® ƒëen", DonVi:"Chai", GiaBan:100000, MoTa:"Nguy√™n ch·∫•t 100%", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP037", TenSP:"D·∫ßu √¥ liu nguy√™n ch·∫•t", DonVi:"Chai", GiaBan:150000, MoTa:"Nh·∫≠p kh·∫©u √ù", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP038", TenSP:"B·ªôt ngh·ªá h·ªØu c∆°", DonVi:"G√≥i", GiaBan:75000, MoTa:"Ch·ªëng oxy h√≥a", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP039", TenSP:"T∆∞∆°ng ·ªõt l√™n men", DonVi:"Chai", GiaBan:65000, MoTa:"T·ª± nhi√™n, kh√¥ng ph·∫©m m√†u", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"}),
(:SanPham {MaSP:"SP040", TenSP:"Mu·ªëi ti√™u chanh", DonVi:"H≈©", GiaBan:45000, MoTa:"D√πng ch·∫•m tr√°i c√¢y", HinhAnhURL:"https://res.cloudinary.com/dhgzp2ifm/image/upload/v1760807548/ca-rot_crarli.png"});

// ==========================
// üèôÔ∏è TH√ÄNH PH·ªê - QU·∫¨N - PH∆Ø·ªúNG (m·ªü r·ªông)
// ==========================
CREATE
(:ThanhPho {MaTP:"01", TenTP:"TP. H√† N·ªôi"}),
(:ThanhPho {MaTP:"79", TenTP:"TP. H·ªì Ch√≠ Minh"}),
(:ThanhPho {MaTP:"48", TenTP:"TP. ƒê√† N·∫µng"}),
(:Quan {MaQuan:"001", TenQuan:"Ho√†n Ki·∫øm"}),
(:Quan {MaQuan:"007", TenQuan:"ƒê·ªëng ƒêa"}),
(:Quan {MaQuan:"037", TenQuan:"Qu·∫≠n 1"}),
(:Quan {MaQuan:"045", TenQuan:"H·∫£i Ch√¢u"}),
(:Phuong {MaPhuong:"00101", TenPhuong:"H√†ng Gai"}),
(:Phuong {MaPhuong:"00703", TenPhuong:"Trung T·ª±"}),
(:Phuong {MaPhuong:"03702", TenPhuong:"B·∫øn Ngh√©"}),
(:Phuong {MaPhuong:"04505", TenPhuong:"Ph∆∞·ªõc Ninh"});

// ==========================
// üè¨ C·ª¨A H√ÄNG
// ==========================
CREATE
(:CuaHang {MaCH:"CHHN01", TenCH:"Organic Ho√†n Ki·∫øm", DiaChiCuThe:"15 Ph·ªë H√†ng B√†i", SoDienThoai:"024111111"}),
(:CuaHang {MaCH:"CHHCM01", TenCH:"Organic Qu·∫≠n 1", DiaChiCuThe:"90 Nguy·ªÖn Hu·ªá", SoDienThoai:"028222222"}),
(:CuaHang {MaCH:"CHDN01", TenCH:"Organic ƒê√† N·∫µng", DiaChiCuThe:"12 L√™ Du·∫©n", SoDienThoai:"0236333333"});

// ==========================
// üë®‚Äçüíº NG∆Ø·ªúI QU·∫¢N TR·ªä
// ==========================
CREATE
(:NguoiQuanTri {MaQT:"QT001", HoTen:"Nguy·ªÖn Qu·ªëc B·∫£o", Email:"bao@organic.vn", SoDienThoai:"0909000001", TenDangNhap:"quanbao", MatKhau:"admin123"}),
(:NguoiQuanTri {MaQT:"QT002", HoTen:"L√™ Minh Th∆∞", Email:"thu@organic.vn", SoDienThoai:"0918000002", TenDangNhap:"lethu", MatKhau:"admin456"}),
(:NguoiQuanTri {MaQT:"QT003", HoTen:"Tr·∫ßn H·ªØu Ph√∫c", Email:"phuc@organic.vn", SoDienThoai:"0909000003", TenDangNhap:"tranphuc", MatKhau:"admin789"});

// ==========================
// üë©‚Äçü¶∞ KH√ÅCH H√ÄNG
// ==========================
CREATE
(:KhachHang {MaKH:"KH001", HoTen:"Nguy·ªÖn Th·ªã A", TenDangNhap:"ngta", MatKhau:"123456", Email:"a@mail.com", SoDienThoai:"0901000001", DiaChiCuThe:"T·∫ßng 5, T√≤a nh√† M, 120 ƒê∆∞·ªùng C", NgaySinh:date("1990-05-15"), LoaiKH:"VIP"}),
(:KhachHang {MaKH:"KH002", HoTen:"Tr·∫ßn VƒÉn B", TenDangNhap:"tranvb", MatKhau:"654321", Email:"b@mail.com", SoDienThoai:"0988000002", DiaChiCuThe:"S·ªë 34, Ng√µ 10, Ph·ªë P", NgaySinh:date("1995-11-22"), LoaiKH:"Th∆∞·ªùng"}),
(:KhachHang {MaKH:"KH003", HoTen:"Ph·∫°m Th·ªã C", TenDangNhap:"phamc", MatKhau:"111222", Email:"c@mail.com", SoDienThoai:"0919000003", DiaChiCuThe:"123 Nguy·ªÖn Tr√£i, Qu·∫≠n 1", NgaySinh:date("1992-03-11"), LoaiKH:"VIP"}),
(:KhachHang {MaKH:"KH004", HoTen:"V√µ Duy Khang", TenDangNhap:"vokhang", MatKhau:"abc123", Email:"khang@mail.com", SoDienThoai:"0917000004", DiaChiCuThe:"45 Nguy·ªÖn VƒÉn Linh, ƒê√† N·∫µng", NgaySinh:date("1998-09-01"), LoaiKH:"Th∆∞·ªùng"}),
(:KhachHang {MaKH:"KH005", HoTen:"Ng√¥ Th·ªã Di·ªÖm", TenDangNhap:"ngodiem", MatKhau:"xyz789", Email:"diem@mail.com", SoDienThoai:"0938000005", DiaChiCuThe:"99 ƒêi·ªán Bi√™n Ph·ªß, TP.HCM", NgaySinh:date("1993-07-12"), LoaiKH:"VIP"});

// ==========================
// üßæ H√ìA ƒê∆†N
// ==========================
CREATE
(:HoaDon {MaHD:"HD001", ThanhTien:255000, DiaChiGiaoHang:"T·∫ßng 5, T√≤a nh√† M, 120 ƒê∆∞·ªùng C", NgayTao:datetime("2025-10-10T09:30:00Z"), GhiChu:"Giao tr∆∞·ªõc 11h", TrangThaiThanhToan:"ƒê√£ thanh to√°n"}),
(:HoaDon {MaHD:"HD002", ThanhTien:160000, DiaChiGiaoHang:"S·ªë 34, Ng√µ 10, Ph·ªë P", NgayTao:datetime("2025-10-12T15:00:00Z"), GhiChu:"Giao trong ng√†y", TrangThaiThanhToan:"Ch∆∞a thanh to√°n"}),
(:HoaDon {MaHD:"HD003", ThanhTien:85000, DiaChiGiaoHang:"123 Nguy·ªÖn Tr√£i, Qu·∫≠n 1", NgayTao:datetime("2025-10-15T10:30:00Z"), GhiChu:"Thanh to√°n khi nh·∫≠n h√†ng", TrangThaiThanhToan:"ƒê√£ thanh to√°n"}),
(:HoaDon {MaHD:"HD004", ThanhTien:200000, DiaChiGiaoHang:"45 Nguy·ªÖn VƒÉn Linh, ƒê√† N·∫µng", NgayTao:datetime("2025-10-18T08:45:00Z"), GhiChu:"Giao nhanh", TrangThaiThanhToan:"ƒê√£ thanh to√°n"}),
(:HoaDon {MaHD:"HD005", ThanhTien:175000, DiaChiGiaoHang:"99 ƒêi·ªán Bi√™n Ph·ªß, TP.HCM", NgayTao:datetime("2025-10-19T16:00:00Z"), GhiChu:"Thanh to√°n online", TrangThaiThanhToan:"ƒê√£ thanh to√°n"});

// ==========================
// üîó QUAN H·ªÜ
// ==========================

// SanPham - DanhMuc
MATCH (sp:SanPham), (dm:DanhMuc)
WHERE sp.MaSP >= "SP001" AND sp.MaSP <= "SP010" AND dm.MaDM = "DM01"
CREATE (sp)-[:THUOC_DANHMUC]->(dm);

MATCH (sp:SanPham), (dm:DanhMuc)
WHERE sp.MaSP >= "SP011" AND sp.MaSP <= "SP020" AND dm.MaDM = "DM02"
CREATE (sp)-[:THUOC_DANHMUC]->(dm);

MATCH (sp:SanPham), (dm:DanhMuc)
WHERE sp.MaSP >= "SP021" AND sp.MaSP <= "SP030" AND dm.MaDM = "DM03"
CREATE (sp)-[:THUOC_DANHMUC]->(dm);

MATCH (sp:SanPham), (dm:DanhMuc)
WHERE sp.MaSP >= "SP031" AND sp.MaSP <= "SP040" AND dm.MaDM = "DM04"
CREATE (sp)-[:THUOC_DANHMUC]->(dm);

// KhachHang - HoaDon
MATCH (kh:KhachHang {MaKH:"KH001"}), (hd:HoaDon {MaHD:"HD001"}) CREATE (kh)-[:TAO_HOADON]->(hd);
MATCH (kh:KhachHang {MaKH:"KH002"}), (hd:HoaDon {MaHD:"HD002"}) CREATE (kh)-[:TAO_HOADON]->(hd);
MATCH (kh:KhachHang {MaKH:"KH003"}), (hd:HoaDon {MaHD:"HD003"}) CREATE (kh)-[:TAO_HOADON]->(hd);
MATCH (kh:KhachHang {MaKH:"KH004"}), (hd:HoaDon {MaHD:"HD004"}) CREATE (kh)-[:TAO_HOADON]->(hd);
MATCH (kh:KhachHang {MaKH:"KH005"}), (hd:HoaDon {MaHD:"HD005"}) CREATE (kh)-[:TAO_HOADON]->(hd);

// HoaDon - SanPham (m·∫´u)
MATCH (hd:HoaDon {MaHD:"HD001"}), (sp:SanPham) WHERE sp.MaSP IN ["SP001","SP011","SP021"] CREATE (hd)-[:CHUA_SANPHAM {SoLuong:2}]->(sp);
MATCH (hd:HoaDon {MaHD:"HD002"}), (sp:SanPham) WHERE sp.MaSP IN ["SP004","SP012","SP031"] CREATE (hd)-[:CHUA_SANPHAM {SoLuong:1}]->(sp);
MATCH (hd:HoaDon {MaHD:"HD003"}), (sp:SanPham) WHERE sp.MaSP IN ["SP019","SP036"] CREATE (hd)-[:CHUA_SANPHAM {SoLuong:1}]->(sp);
MATCH (hd:HoaDon {MaHD:"HD004"}), (sp:SanPham) WHERE sp.MaSP IN ["SP025","SP033"] CREATE (hd)-[:CHUA_SANPHAM {SoLuong:3}]->(sp);
MATCH (hd:HoaDon {MaHD:"HD005"}), (sp:SanPham) WHERE sp.MaSP IN ["SP015","SP035"] CREATE (hd)-[:CHUA_SANPHAM {SoLuong:2}]->(sp);

// CuaHang - SanPham
MATCH (ch:CuaHang {MaCH:"CHHN01"}), (sp:SanPham) WHERE sp.MaSP <= "SP010" CREATE (ch)-[:CUNG_CAP]->(sp);
MATCH (ch:CuaHang {MaCH:"CHHCM01"}), (sp:SanPham) WHERE sp.MaSP >= "SP011" AND sp.MaSP <= "SP030" CREATE (ch)-[:CUNG_CAP]->(sp);
MATCH (ch:CuaHang {MaCH:"CHDN01"}), (sp:SanPham) WHERE sp.MaSP >= "SP031" AND sp.MaSP <= "SP040" CREATE (ch)-[:CUNG_CAP]->(sp);

// NguoiQuanTri - CuaHang
MATCH (qt:NguoiQuanTri {MaQT:"QT001"}), (ch:CuaHang {MaCH:"CHHN01"}) CREATE (qt)-[:QUAN_LY]->(ch);
MATCH (qt:NguoiQuanTri {MaQT:"QT002"}), (ch:CuaHang {MaCH:"CHHCM01"}) CREATE (qt)-[:QUAN_LY]->(ch);
MATCH (qt:NguoiQuanTri {MaQT:"QT003"}), (ch:CuaHang {MaCH:"CHDN01"}) CREATE (qt)-[:QUAN_LY]->(ch);



 // NH√Ä CUNG C·∫§P
// ==========================
CREATE
(:NhaCungCap {MaNCC: "NCC01", TenNCC: "Farm An To√†n HN", DiaChi: "123 ƒê∆∞·ªùng S·∫°ch, H√† N·ªôi", SoDienThoai: "0901234567", Email: "contact@farmantoan.vn"}),
(:NhaCungCap {MaNCC: "NCC02", TenNCC: "V∆∞·ªùn Tr√°i C√¢y Mi·ªÅn Nam", DiaChi: "456 ƒê∆∞·ªùng Ng·ªçt, TP.HCM", SoDienThoai: "0987654321", Email: "fruits@miennam.com"}),
(:NhaCungCap {MaNCC: "NCC03", TenNCC: "Ng≈© C·ªëc Xanh", DiaChi: "789 ƒê∆∞·ªùng Dinh D∆∞·ª°ng, ƒê√† N·∫µng", SoDienThoai: "0912345678", Email: "ngucocxanh@mail.com"});

// (M·ªëi quan h·ªá: NhaCungCap - NHAP_HANG - PhieuNhap)
// ==========================
CREATE
(:PhieuNhap {MaPN: "PN001", NgayLap: date("2025-10-01"), ThanhTien: 5500000}),
(:PhieuNhap {MaPN: "PN002", NgayLap: date("2025-10-05"), ThanhTien: 7200000}),
(:PhieuNhap {MaPN: "PN003", NgayLap: date("2025-10-10"), ThanhTien: 3000000});

// Quan h·ªá NhaCungCap - PhieuNhap
MATCH (ncc:NhaCungCap {MaNCC:"NCC01"}), (pn:PhieuNhap {MaPN:"PN001"}) CREATE (ncc)-[:CUNG_CAP_PHIEU]->(pn);
MATCH (ncc:NhaCungCap {MaNCC:"NCC02"}), (pn:PhieuNhap {MaPN:"PN002"}) CREATE (ncc)-[:CUNG_CAP_PHIEU]->(pn);
MATCH (ncc:NhaCungCap {MaNCC:"NCC03"}), (pn:PhieuNhap {MaPN:"PN003"}) CREATE (ncc)-[:CUNG_CAP_PHIEU]->(pn);

// Quan h·ªá PhieuNhap - SanPham (chi ti·∫øt phi·∫øu nh·∫≠p)
// PN001: SP001 - C√† r·ªët (10kg), SP002 - Khoai t√¢y (8kg)
MATCH (pn:PhieuNhap {MaPN:"PN001"}), (sp:SanPham) WHERE sp.MaSP = "SP001" CREATE (pn)-[:NHAP_SANPHAM {SoLuong: 10, DonGiaNhap: 25000}]->(sp);
MATCH (pn:PhieuNhap {MaPN:"PN001"}), (sp:SanPham) WHERE sp.MaSP = "SP002" CREATE (pn)-[:NHAP_SANPHAM {SoLuong: 8, DonGiaNhap: 30000}]->(sp);

// PN002: SP011 - T√°o Fuji (5kg), SP012 - Cam (10kg)
MATCH (pn:PhieuNhap {MaPN:"PN002"}), (sp:SanPham) WHERE sp.MaSP = "SP011" CREATE (pn)-[:NHAP_SANPHAM {SoLuong: 5, DonGiaNhap: 100000}]->(sp);
MATCH (pn:PhieuNhap {MaPN:"PN002"}), (sp:SanPham) WHERE sp.MaSP = "SP012" CREATE (pn)-[:NHAP_SANPHAM {SoLuong: 10, DonGiaNhap: 70000}]->(sp);


// ƒê√ÅNH GI√Å
// (M·ªëi quan h·ªá: KhachHang - VIET_DANH_GIA - DanhGia - DANH_GIA_CHO - SanPham)
// ==========================
CREATE
(:DanhGia {MaDG: "DG001", SoSao: 5, BinhLuan: "Rau c·ªß t∆∞∆°i ngon, giao h√†ng nhanh.", NgayTao: datetime("2025-10-11T12:00:00Z")}),
(:DanhGia {MaDG: "DG002", SoSao: 4, BinhLuan: "T√°o gi√≤n, ng·ªçt nh∆∞ng h∆°i m·∫Øc.", NgayTao: datetime("2025-10-16T15:30:00Z")}),
(:DanhGia {MaDG: "DG003", SoSao: 5, BinhLuan: "D·∫ßu √¥ liu nguy√™n ch·∫•t, r·∫•t ∆∞ng √Ω.", NgayTao: datetime("2025-10-20T09:00:00Z")});

// Quan h·ªá KhachHang - DanhGia - SanPham
// KH001 ƒë√°nh gi√° SP001
MATCH (kh:KhachHang {MaKH:"KH001"}), (dg:DanhGia {MaDG:"DG001"}) CREATE (kh)-[:VIET_DANH_GIA]->(dg);
MATCH (dg:DanhGia {MaDG:"DG001"}), (sp:SanPham {MaSP:"SP001"}) CREATE (dg)-[:DANH_GIA_CHO]->(sp);

// KH003 ƒë√°nh gi√° SP011
MATCH (kh:KhachHang {MaKH:"KH003"}), (dg:DanhGia {MaDG:"DG002"}) CREATE (kh)-[:VIET_DANH_GIA]->(dg);
MATCH (dg:DanhGia {MaDG:"DG002"}), (sp:SanPham {MaSP:"SP011"}) CREATE (dg)-[:DANH_GIA_CHO]->(sp);

// KH005 ƒë√°nh gi√° SP037
MATCH (kh:KhachHang {MaKH:"KH005"}), (dg:DanhGia {MaDG:"DG003"}) CREATE (kh)-[:VIET_DANH_GIA]->(dg);
MATCH (dg:DanhGia {MaDG:"DG003"}), (sp:SanPham {MaSP:"SP037"}) CREATE (dg)-[:DANH_GIA_CHO]->(sp);


// KHUY·∫æN M√ÉI
// (M·ªëi quan h·ªá: KhuyenMai - AP_DUNG_CHO - SanPham / DanhMuc)
// ==========================
CREATE
(:KhuyenMai {MaKM: "KM001", PhanTram: 10, ThoiGianBatDau: datetime("2025-11-01T00:00:00Z"), ThoiGianKetThuc: datetime("2025-11-15T23:59:59Z")}),
(:KhuyenMai {MaKM: "KM002", PhanTram: 15, ThoiGianBatDau: datetime("2025-10-25T00:00:00Z"), ThoiGianKetThuc: datetime("2025-10-31T23:59:59Z")});

// Quan h·ªá KhuyenMai - SanPham / DanhMuc
// KM001: Gi·∫£m 10% cho to√†n b·ªô Danh M·ª•c "Tr√°i C√¢y" (DM02)
MATCH (km:KhuyenMai {MaKM:"KM001"}), (dm:DanhMuc {MaDM:"DM02"}) CREATE (km)-[:AP_DUNG_CHO]->(dm);

// KM002: Gi·∫£m 15% cho s·∫£n ph·∫©m "G·∫°o l·ª©t ƒë·ªè" (SP021)
MATCH (km:KhuyenMai {MaKM:"KM002"}), (sp:SanPham {MaSP:"SP021"}) CREATE (km)-[:AP_DUNG_CHO]->(sp);


// Th√™m SoTon = 5 cho s·∫£n ph·∫©m SP001 ‚Üí SP010 c·ªßa c·ª≠a h√†ng CHHN01
MATCH (ch:CuaHang {MaCH:"CHHN01"})-[r:CUNG_CAP]->(sp:SanPham)
WHERE sp.MaSP <= "SP010"
SET r.SoTon = 5;

// Th√™m SoTon = 8 cho s·∫£n ph·∫©m SP011 ‚Üí SP030 c·ªßa c·ª≠a h√†ng CHHCM01
MATCH (ch:CuaHang {MaCH:"CHHCM01"})-[r:CUNG_CAP]->(sp:SanPham)
WHERE sp.MaSP >= "SP011" AND sp.MaSP <= "SP030"
SET r.SoTon = 8;

// Th√™m SoTon = 10 cho s·∫£n ph·∫©m SP031 ‚Üí SP040 c·ªßa c·ª≠a h√†ng CHDN01
MATCH (ch:CuaHang {MaCH:"CHDN01"})-[r:CUNG_CAP]->(sp:SanPham)
WHERE sp.MaSP >= "SP031" AND sp.MaSP <= "SP040"
SET r.SoTon = 10;


// Phi·∫øu nh·∫≠p n√†y cho c·ª≠a hang
MATCH (pn:PhieuNhap {MaPN:"PN002"}), (ch:CuaHang {MaCH:"CHHN01"})
CREATE (pn)-[:NHAP_CHO_CUAHANG]->(ch);

// C·∫≠p nh·∫≠t t·ªìn kho t·ª± ƒë·ªông khi phi·∫øu nh·∫≠p PN002 ƒë∆∞·ª£c nh·∫≠p cho c·ª≠a h√†ng CHHN01
MATCH (pn:PhieuNhap {MaPN:"PN002"})-[nhap:NHAP_SANPHAM]->(sp:SanPham),
      (pn)-[:NHAP_CHO_CUAHANG]->(ch:CuaHang)
MERGE (ch)-[r:CUNG_CAP]->(sp)
ON CREATE SET r.SoTon = nhap.SoLuong
ON MATCH SET r.SoTon = r.SoTon + nhap.SoLuong;

UNWIND [
  {ma: "SP002", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP002_sxgshg.jpg"},
  {ma: "SP004", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP004_wd1xd5.jpg"},
  {ma: "SP005", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP005_wasb5l.png"},
  {ma: "SP006", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP006_hx0pge.png"},
  {ma: "SP007", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP007_vfhbm9.jpg"},
  {ma: "SP008", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629434/SP008_qijw7u.png"},
  {ma: "SP009", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP009_nyzs6r.jpg"},
  {ma: "SP010", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP010_drruoq.png"},
  {ma: "SP012", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP012_gdmrsx.png"},
  {ma: "SP013", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP013_f7eijf.png"},
  {ma: "SP014", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP014_hzmm4a.jpg"},
  {ma: "SP015", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP015_bnldnx.png"},
  {ma: "SP016", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP016_tulscv.png"},
  {ma: "SP017", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP017_eddajg.jpg"},
  {ma: "SP018", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP018_oneagg.jpg"},
  {ma: "SP019", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP019_wy6xsx.jpg"},
  {ma: "SP020", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP020_dmhbuy.jpg"},
  {ma: "SP021", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP021_ebvwsg.png"},
  {ma: "SP022", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP022_qgvqzp.jpg"},
  {ma: "SP023", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP023_c5clap.jpg"},
  {ma: "SP024", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP024_uzqlad.jpg"},
  {ma: "SP025", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP025_fo0p86.png"},
  {ma: "SP026", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP026_uaz7fa.jpg"},
  {ma: "SP027", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629435/SP027_ry7qv1.jpg"},
  {ma: "SP029", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP029_iznnft.png"},
  {ma: "SP030", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP030_tvr9o2.jpg"},
  {ma: "SP031", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP031_uesbpl.png"},
  {ma: "SP032", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629437/SP032_fimi4k.jpg"},
  {ma: "SP033", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629437/SP033_mtggcv.png"},
  {ma: "SP034", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP034_wylhab.png"},
  {ma: "SP035", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629438/SP035_ncrowe.jpg"},
  {ma: "SP036", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP036_x1alxz.jpg"},
  {ma: "SP037", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP037_ccxdxv.png"},
  {ma: "SP038", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP038_spau47.png"},
  {ma: "SP039", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP039_ey6n9q.jpg"},
  {ma: "SP040", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP040_n82ca4.jpg"}
] AS map
MATCH (sp:SanPham {MaSP: map.ma})
SET sp.HinhAnhURL = map.url
RETURN sp.MaSP, sp.TenSP, sp.HinhAnhURL AS newURL
ORDER BY sp.MaSP;UNWIND [
  {ma: "SP002", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP002_sxgshg.jpg"},
  {ma: "SP004", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP004_wd1xd5.jpg"},
  {ma: "SP005", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP005_wasb5l.png"},
  {ma: "SP006", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP006_hx0pge.png"},
  {ma: "SP007", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP007_vfhbm9.jpg"},
  {ma: "SP008", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629434/SP008_qijw7u.png"},
  {ma: "SP009", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP009_nyzs6r.jpg"},
  {ma: "SP010", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP010_drruoq.png"},
  {ma: "SP012", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP012_gdmrsx.png"},
  {ma: "SP013", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629429/SP013_f7eijf.png"},
  {ma: "SP014", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629430/SP014_hzmm4a.jpg"},
  {ma: "SP015", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP015_bnldnx.png"},
  {ma: "SP016", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP016_tulscv.png"},
  {ma: "SP017", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP017_eddajg.jpg"},
  {ma: "SP018", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP018_oneagg.jpg"},
  {ma: "SP019", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP019_wy6xsx.jpg"},
  {ma: "SP020", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629431/SP020_dmhbuy.jpg"},
  {ma: "SP021", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP021_ebvwsg.png"},
  {ma: "SP022", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP022_qgvqzp.jpg"},
  {ma: "SP023", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP023_c5clap.jpg"},
  {ma: "SP024", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP024_uzqlad.jpg"},
  {ma: "SP025", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP025_fo0p86.png"},
  {ma: "SP026", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629432/SP026_uaz7fa.jpg"},
  {ma: "SP027", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629435/SP027_ry7qv1.jpg"},
  {ma: "SP029", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP029_iznnft.png"},
  {ma: "SP030", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP030_tvr9o2.jpg"},
  {ma: "SP031", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629436/SP031_uesbpl.png"},
  {ma: "SP032", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629437/SP032_fimi4k.jpg"},
  {ma: "SP033", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629437/SP033_mtggcv.png"},
  {ma: "SP034", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP034_wylhab.png"},
  {ma: "SP035", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629438/SP035_ncrowe.jpg"},
  {ma: "SP036", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP036_x1alxz.jpg"},
  {ma: "SP037", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629439/SP037_ccxdxv.png"},
  {ma: "SP038", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP038_spau47.png"},
  {ma: "SP039", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP039_ey6n9q.jpg"},
  {ma: "SP040", url: "https://res.cloudinary.com/dhgzp2ifm/image/upload/v1761629442/SP040_n82ca4.jpg"}
] AS map
MATCH (sp:SanPham {MaSP: map.ma})
SET sp.HinhAnhURL = map.url
RETURN sp.MaSP, sp.TenSP, sp.HinhAnhURL AS newURL
ORDER BY sp.MaSP;

MATCH (hd:HoaDon)
SET hd.TrangThai = 'Ch·ªù x·ª≠ l√Ω'
RETURN count(hd) AS SoHoaDonDuocCapNhat;
